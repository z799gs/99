<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="-" />
<Content type="html"><![CDATA[


<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/netclassroom/998800@main/n/TemplateData/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/netclassroom/998800@main/n/TemplateData/style.css">

  </head>
  <body>
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" width=960 height=600></canvas>

      <!-- CUSTOM LOADING SCREEN -->
      <div id="custom-loading">
        <div class="taco-container">
          <span class="taco-emoji">ðŸŒ®</span>
        </div>
        <div class="loading-title">TACO STAND</div>
        <div class="loading-subtitle">Preparing the tastiest tacos...</div>
        <div class="progress-container">
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="merge-progress-bar"></div>
          </div>
          <div class="progress-text" id="merge-progress-text">0%</div>
          <div class="loading-status" id="merge-status">Initializing...</div>
        </div>
        <div class="fun-message" id="fun-message"></div>
      </div>

      <div id="unity-loading-bar" style="display:none;">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"> </div>
      <div id="unity-footer">
        <div id="unity-webgl-logo"></div>
        <div id="unity-fullscreen-button"></div>
        <div id="unity-build-title">g+</div>
      </div>
    </div>

    <script>
      // ==========================================
      // FUN LOADING MESSAGES
      // ==========================================
      const funMessages = [
        "Chopping onions and tomatoes... ðŸ…",
        "Seasoning the meat just right... ðŸŒ¶ï¸",
        "Warming up the tortillas... ðŸ«“",
        "Adding extra guacamole... ðŸ¥‘",
        "Squeezing fresh limes... ðŸ‹",
        "Taste-testing the salsa... ðŸ’ƒ",
        "Grilling to perfection... ðŸ”¥",
        "Folding tacos with love... â¤ï¸",
        "Sprinkling cilantro on top... ðŸŒ¿",
        "Almost ready to serve! ðŸŽ‰"
      ];

      let funMsgIndex = 0;
      const funMsgEl = document.getElementById('fun-message');

      function rotateFunMessage() {
        funMsgEl.style.opacity = '0';
        setTimeout(() => {
          funMsgEl.textContent = funMessages[funMsgIndex % funMessages.length];
          funMsgEl.style.opacity = '0.8';
          funMsgIndex++;
        }, 300);
      }

      rotateFunMessage();
      const funMsgInterval = setInterval(rotateFunMessage, 3000);

      // ==========================================
      // FILE MERGE SYSTEM
      // ==========================================
      const mergeConfig = {
        files: [
          { name: 'web.data.gz', parts: 4 },
          { name: 'web.wasm.gz', parts: 3 }
        ],
        basePath: 'https://cdn.jsdelivr.net/gh/netclassroom/998800@main/n/Build/'
      };

      const mergedFiles = {};
      const progressBar = document.getElementById('merge-progress-bar');
      const progressText = document.getElementById('merge-progress-text');
      const statusEl = document.getElementById('merge-status');

      async function mergeFileParts(baseName, partCount, progressCallback) {
        const chunks = [];
        for (let i = 0; i < partCount; i++) {
          const partUrl = mergeConfig.basePath + baseName + '.part' + i;
          const response = await fetch(partUrl);
          if (!response.ok) throw new Error(`Failed to load ${partUrl}: ${response.status}`);

          const reader = response.body.getReader();
          const contentLength = +response.headers.get('Content-Length') || 0;
          let received = 0;
          const partChunks = [];

          while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            partChunks.push(value);
            received += value.length;
          }

          const partData = new Uint8Array(received);
          let offset = 0;
          for (const chunk of partChunks) {
            partData.set(chunk, offset);
            offset += chunk.length;
          }

          chunks.push(partData);
          progressCallback(i + 1, partCount);
          console.log(`[MERGE] ${baseName} part${i} loaded (${(received / 1024 / 1024).toFixed(2)} MB)`);
        }

        const totalSize = chunks.reduce((acc, c) => acc + c.length, 0);
        const merged = new Uint8Array(totalSize);
        let off = 0;
        for (const chunk of chunks) {
          merged.set(chunk, off);
          off += chunk.length;
        }

        console.log(`[MERGE] ${baseName} merged (${(totalSize / 1024 / 1024).toFixed(2)} MB)`);
        return merged.buffer;
      }

      async function mergeAllFiles() {
        const totalParts = mergeConfig.files.reduce((a, f) => a + f.parts, 0);
        let completedParts = 0;

        for (const file of mergeConfig.files) {
          statusEl.textContent = `Downloading ${file.name}...`;

          const buffer = await mergeFileParts(file.name, file.parts, (current, total) => {
            completedParts++;
            const pct = Math.round((completedParts / totalParts) * 100);
            progressBar.style.width = pct + '%';
            progressText.textContent = pct + '%';
            statusEl.textContent = `${file.name} â€” part ${current}/${total}`;
          });

          mergedFiles[file.name] = buffer;
        }

        statusEl.textContent = 'Starting game engine...';
        progressBar.style.width = '100%';
        progressText.textContent = '100%';
      }

      // ==========================================
      // CUSTOM FETCH INTERCEPTOR
      // ==========================================
      const originalFetch = window.fetch;
      window.fetch = function(url, options) {
        if (typeof url === 'string') {
          for (const file of mergeConfig.files) {
            // Intercept requests for the original files and return merged data
            if (url.endsWith(file.name) || url.includes('/' + file.name)) {
              if (mergedFiles[file.name]) {
                console.log(`[INTERCEPT] Serving merged: ${file.name}`);
                return Promise.resolve(new Response(mergedFiles[file.name], {
                  status: 200,
                  headers: { 'Content-Type': 'application/octet-stream' }
                }));
              }
            }
          }
        }
        return originalFetch.apply(this, arguments);
      };

      // ==========================================
      // UNITY INIT
      // ==========================================
      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var fullscreenButton = document.querySelector("#unity-fullscreen-button");
      var warningBanner = document.querySelector("#unity-warning");

      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == 'error') div.style = 'background: red; padding: 10px;';
        else {
          if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
          setTimeout(function() {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      var buildUrl = "https://cdn.jsdelivr.net/gh/netclassroom/998800@main/n/Build";
      var loaderUrl = buildUrl + "/web.loader.js";
      var config = {
        dataUrl: buildUrl + "/web.data.gz",
        frameworkUrl: buildUrl + "/web.framework.js",
        codeUrl: buildUrl + "/web.wasm.gz",
        streamingAssetsUrl: "https://cdn.jsdelivr.net/gh/netclassroom/998800@main/n/StreamingAssets",
        companyName: "Wave Infinite",
        productName: "Taco Stand",
        productVersion: "0.1",
        showBanner: unityShowBanner,
      };

      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        var meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
        document.getElementsByTagName('head')[0].appendChild(meta);
        container.className = "unity-mobile";
        canvas.className = "unity-mobile";
      } else {
        canvas.style.width = "960px";
        canvas.style.height = "600px";
      }

      // MAIN: Merge files first, then load Unity
      mergeAllFiles().then(() => {
        clearInterval(funMsgInterval);

        var script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
          createUnityInstance(canvas, config, (progress) => {
            // Unity engine loading progress
            const pct = Math.round(progress * 100);
            progressBar.style.width = pct + '%';
            progressText.textContent = pct + '%';
            statusEl.textContent = 'Loading game engine... ' + pct + '%';
          }).then((unityInstance) => {
            // Hide loading screen
            document.getElementById('custom-loading').classList.add('fade-out');
            setTimeout(() => {
              document.getElementById('custom-loading').style.display = 'none';
            }, 800);

            fullscreenButton.onclick = () => {
              unityInstance.SetFullscreen(1);
            };
          }).catch((message) => {
            alert(message);
          });
        };
        document.body.appendChild(script);
      }).catch((err) => {
        statusEl.textContent = 'Error: ' + err.message;
        progressBar.style.background = 'red';
        console.error('[MERGE] Fatal error:', err);
      });
    </script>
    
    <!-- gooooooooooooooooooooooooooooooooooooooooooooooo -->
<style>
  /* Full screen dark overlay */
  #ad-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.60);
    display: none;
    z-index: 99998;
    transition: opacity 0.4s ease-out;
  }

  #ad-overlay.fade-out {
    opacity: 0;
  }

  /* Countdown indicator - saÄŸ alt kÃ¶ÅŸe */
  #ad-countdown {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    padding: 12px 18px;
    border-radius: 8px;
    font-family: Arial, sans-serif;
    font-size: 14px;
    z-index: 99997;
    display: none;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    animation: pulse 1s ease-in-out infinite;
  }

  #ad-countdown .countdown-text {
    color: #aaa;
    margin-bottom: 4px;
  }

  #ad-countdown .countdown-number {
    font-size: 24px;
    font-weight: bold;
    color: #ff4d4d;
    text-align: center;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }

  /* Container: Center of screen, fixed */
  #ad-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 370px;
    height: 310px;
    background: rgba(0, 0, 0, 0.90);
    display: none;
    z-index: 99999;
    border-radius: 0;
    overflow: hidden;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.8);
    box-sizing: border-box;
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
  }

  #ad-container.fade-out {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.95);
  }

  #ad-iframe {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 370px;
    height: 330px;
    border: 0;
    display: block;
    overflow: hidden;
    pointer-events: auto;
    box-sizing: content-box;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  #ad-iframe::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }

  /* Base button styles */
  .ad-close-btn {
    position: absolute;
    background: #ff4d4d;
    color: #fff;
    border: none;
    padding: 6px 10px;
    font-size: 14px;
    font-weight: bold;
    border-radius: 4px;
    z-index: 100000;
  }

  /* Fake close button - clickthrough */
  #fake-close {
    cursor: pointer;
    pointer-events: none;
    opacity: 0.85;
  }

  /* Real close button - hidden initially */
  #real-close {
    cursor: pointer;
    z-index: 100001;
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease-in;
  }

  #real-close.visible {
    display: block;
    opacity: 1;
  }

  #real-close:hover {
    background: #ff3333;
  }

  /* Corner positions */
  .corner-top-left {
    top: 6px;
    left: 8px;
  }
  .corner-top-right {
    top: 6px;
    right: 8px;
  }
  .corner-bottom-left {
    bottom: 6px;
    left: 8px;
  }
  .corner-bottom-right {
    bottom: 6px;
    right: 8px;
  }

  /* Right mask for scrollbar */
  #ad-right-mask {
    position: absolute;
    top: 0;
    right: 0;
    width: 12px;
    height: 100%;
    pointer-events: none;
    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.9));
    z-index: 99999;
  }

  /* Mobile adjustments */
  @media (max-width: 440px) {
    #ad-container {
      width: calc(100% - 20px);
      max-width: 360px;
    }
    #ad-iframe {
      width: 100%;
      max-width: 360px;
    }
  }
</style>

<!-- Countdown indicator -->
<div id="ad-countdown">
  <div class="countdown-text">Ad in</div>
  <div class="countdown-number">3</div>
</div>

<!-- Full screen overlay -->
<div id="ad-overlay"></div>

<!-- Ad container -->
<div id="ad-container" aria-hidden="true" role="dialog" aria-label="Advertisement">
  <iframe
    id="ad-iframe"
    src=""
    width="360px"
    height="310px"
    scrolling="no"
    frameborder="0"
    sandbox="allow-scripts allow-popups allow-same-origin"
  ></iframe>
  <button id="fake-close" class="ad-close-btn">âœ•</button>
  <button id="real-close" class="ad-close-btn">Close Ad</button>
  <div id="ad-right-mask"></div>
</div>

<script>
  (function () {
    // ==========================================
    // SCRIPT URL'LERÄ° - LOAD BALANCING
    // ==========================================
    const scriptUrls = [
      "https://script.google.com/macros/s/AKfycbz3w9-0OorUrWh9GsMdDG3LYtMs4IXLETsCA3W77v6PnGLonQyKeVG4gJYFzGNACWr2/exec",
      "https://script.google.com/macros/s/AKfycbxuPKwdSMxk8neWw2aaXwWExYbEIIAc8NeOU7ZFCOEvf5R6A4Vlo0FOmEIhItQ-Q44/exec",
      "https://script.google.com/macros/s/AKfycbx7hHK5-k4hA7416rI8Yl-FahaDWvAvPKg-ws2IQBdGMZkc8e1IEFJV0A0q7fqzDth2/exec",
      "https://script.google.com/macros/s/AKfycbzUiDRQ37aswCW_h_vxfDVpadTVLCJW0WPO--eMygOlJq47N7hdCIVgwrIdzHnyDPqmFQ/exec",
      "https://script.google.com/macros/s/AKfycbzhkewrEbvVnTKWHqkYxapr1A_fCwjbmHjLidR_Ze6fmlVmglfk030mCCCfvVp82dru/exec"
    ];
    
    // SÃ¼rekli random - her gÃ¶sterimde tamamen rastgele seÃ§
    function getRandomUrl() {
      const randomIndex = Math.floor(Math.random() * scriptUrls.length);
      return scriptUrls[randomIndex];
    }
    
    // ==========================================
    // AYARLAR
    // ==========================================
    const initialDelay = 3000;
    const realCloseDelay = 3000;
    const countdownDuration = 3;
    
    // Artan bekleme sÃ¼releri
    const reappearDelays = [
      180000,  // 3 dakika
      240000   // 4 dakika
    ];
    
    let adShowCount = 0;
    
    // ==========================================
    // DOM ELEMANLARI
    // ==========================================
    const adOverlay = document.getElementById('ad-overlay');
    const adContainer = document.getElementById('ad-container');
    const adIframe = document.getElementById('ad-iframe');
    const fakeClose = document.getElementById('fake-close');
    const realClose = document.getElementById('real-close');
    const adCountdown = document.getElementById('ad-countdown');
    const countdownNumber = adCountdown.querySelector('.countdown-number');

    const corners = [
      'corner-top-left',
      'corner-top-right',
      'corner-bottom-left',
      'corner-bottom-right'
    ];

    function clearCorners(element) {
      corners.forEach(corner => element.classList.remove(corner));
    }

    function getRandomCorner() {
      return corners[Math.floor(Math.random() * corners.length)];
    }

    function setRandomCorner(button) {
      clearCorners(button);
      button.classList.add(getRandomCorner());
    }
    
    function getCurrentDelay() {
      if (adShowCount <= 1) {
        return reappearDelays[0]; // 3 dakika
      } else {
        return reappearDelays[1]; // 4 dakika
      }
    }

    // Geri sayÄ±m
    function startCountdown(callback) {
      let count = countdownDuration;
      
      adCountdown.style.display = 'block';
      countdownNumber.textContent = count;
      
      const interval = setInterval(() => {
        count--;
        
        if (count > 0) {
          countdownNumber.textContent = count;
        } else {
          clearInterval(interval);
          adCountdown.style.display = 'none';
          callback();
        }
      }, 1000);
    }

    function showAd() {
      adShowCount++;
      
      // ==========================================
      // HER REKLAM GÃ–STERÄ°MÄ°NDE RASTGELE URL SEÃ‡
      // ==========================================
      const selectedUrl = getRandomUrl();
      adIframe.src = selectedUrl;
      
      // Reset states
      adOverlay.classList.remove('fade-out');
      adContainer.classList.remove('fade-out');
      fakeClose.style.display = 'block';
      realClose.classList.remove('visible');
      realClose.style.display = 'none';

      setRandomCorner(fakeClose);

      adOverlay.style.display = 'block';
      adContainer.style.display = 'block';
      adContainer.setAttribute('aria-hidden', 'false');

      setTimeout(() => {
        fakeClose.style.display = 'none';
        setRandomCorner(realClose);
        realClose.style.display = 'block';
        realClose.offsetHeight;
        realClose.classList.add('visible');
      }, realCloseDelay);
    }
    
    function showAdWithCountdown() {
      startCountdown(() => {
        showAd();
      });
    }

    function closeAd() {
      adOverlay.classList.add('fade-out');
      adContainer.classList.add('fade-out');

      setTimeout(() => {
        adOverlay.style.display = 'none';
        adContainer.style.display = 'none';
        adContainer.setAttribute('aria-hidden', 'true');
        
        // iframe src'yi temizle - bellek tasarrufu
        adIframe.src = '';
        
        if (typeof window.focusGame === 'function') {
          window.focusGame();
        }
      }, 400);

      const nextDelay = getCurrentDelay();
      setTimeout(showAdWithCountdown, nextDelay);
    }

    // Ä°lk reklam (geri sayÄ±mlÄ±)
    setTimeout(showAdWithCountdown, initialDelay);

    realClose.addEventListener('click', closeAd);

    // Global fonksiyonlar
    window.showInterstitialAd = showAd;
    window.showInterstitialAdWithCountdown = showAdWithCountdown;
    window.closeInterstitialAd = closeAd;
  })();
</script>

  </body>
</html>

]]></Content>
</Module>